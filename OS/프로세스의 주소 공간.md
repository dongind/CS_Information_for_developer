# 프로세스의 주소 공간

> 프로세스가 메모리를 할당 받아 관리하는 메모리 공간

### 프로세스 주소 공간

![img](C:\Users\dongi\OneDrive\문서\SSAFY\dongind_oct\CS스터디\CS_Information_for_developer\OS\assets\images%2Fklm03025%2Fpost%2Fcd3ef853-de73-4a07-b062-263ff9d1acdc%2Fimage.png)

- **Stack 영역**
  - 함수의 호출과 관계되는 **지역 변수**와 **매개 변수**가 저장되는 영역
  - Stack 영역의 값은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸
  - 원시 타입의 데이터가 값과 함께 할당
  - 메모리의 높은 주소에서 낮은 주소의 방향으로 할당
  - 재귀 함수가 너무 깊게 호출되거나 함수가 지역 변수를 너무 많이 가지고 있어 stack 영역을 초과하면 stack overflow 에러가 발생
- **Heap 영역**
  - **런타임에 크기가 결정되는 영역**
  - 사용자에 의해 공간이 동적으로 할당 및 해제
  - 주로 참조형 데이터(ex. 클래스) 등의 데이터가 할당
  - 메모리의 낮은 주소에서 높은 주소의 방향으로 할당
- **Data 영역**
  - 전역 변수나 Static 변수 등 프로그램이 사용할 수 있는 데이터를 저장하는 영역
  - 어떤 프로그램에 전역/Static 변수를 참조하는 코드가 존재한다면, 이 프로그램은 컴파일 된 후에 data 영역을 참조하게 된다.
  - 프로그램의 사직과 함께 할당되며, 프로그램이 종료되면 소멸한다.
  - 단, 초기화 되지 않은 변수가 존재한다면 (그림에는 표현되지는 않았지만) BSS(Block Stated Symbol) 영역에 저장된다.
- **Text(Code)영역**
  - 프로그램이 실행될 수 있도록 CPU가 해석 가능한 기계어 코드가 저장되어 있는 공간으로, 프로그램이 수정되면 안되므로 ReadOnly 상태로 저장 되어 있다.



### Data 영역과 Stack 영역

- stack 영역과 data 영역을 구분한 가장 큰 이유는 **역할의 분배**
  - stack 영역 : 함수의 흐름을 관리
  - Data 영역(+ BSS 영역) : 전역 변수, static 변수를 관리
  - 만약에 한 프로세스가 여러 개의 스레드를 갖는다면, 각각의 스레드는 자신만의 Stack 영역을 가진다.
    - 스레드 내에서 수행되는 함수의 흐름을 각각 관리하기 위함
- Data 영역의 공유
  - 각각의 스레드는 자신만의 Stack 영역을 갖지만, Data 영역은 공유한다.
  - 각각의 스레드가 Data 영역의 동일한 내용을 공유함으로써 메모리를 절약할 수 있음



### Data 영역과 BSS 영역

- 초기화 되지 않는 변수 : 프로그램이 실행될 때의 영역만 설정하고 그 값을 프로그램에 저장할 필요는 없음
- 초기화 되는 변수 : 극 값을 프로그램에 저장해야 한다.





### 참조

https://velog.io/@klm03025/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A3%BC%EC%86%8C-%EA%B3%B5%EA%B0%84