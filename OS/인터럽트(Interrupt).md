# 인터럽트(Interrupt)

> 인터럽트란 CP가 특정 기능을 수행하는 도중에 급하게 다른 일을 처리하고자 할 때 사용할 수 있는 기능



### 상세

- 대부분의 컴퓨터에는 한 개의 CPU를 사용하므로 한 순간에는 하나의 일 밖에 처리할 수 없음
- 우선 순위가 급한 작업이 실시한 경우 현재 실행 중인 작업을 즉시 중단하고, 우선 순위 업무를 수행
- 우선 순위 업무가 끝난 경우, 이전에 진행하던 일을 마저 수행



#### 외부 인터럽트

> 입출력 장치, 타이밍 장치, 전원 등 외부적인 요인으로 발생

1. 전원 이상 인터럽트: 정전이나 전원이 이상이 있는 경우
2. 기계 고장 인터럽트: CPU등의 기능적인 동작 오류가 발생한 경우
3. 입출력 인터럽트(I/O Interrupt): 입출력의 종료 등의 이유로 CPU의 수행을 요청하는 인터럽트



#### 내부 인터럽트

> Trap이라고 부르며, 잘못된 명령이나 데이터를 사용할 때 발생

1. 하드웨어 고장(Hardware Interrupt)
   - 컴퓨터 고장
   - 데이터 전달 과정에서의 비트 오류
   - 전원이 나간 경우
2. 실행할 수 없는 명령어 : 기억장치에서 인출한 명령어의 비트 패턴의 정의되어 있지 않은 경우
3. 명령어 실행 오류 : 나누기 0을 하는 경우
4. 사용 권한 위배 : 사용자가 운영체제만 사용할 수 있는 자원에 액세스하는 경우



### 인터럽트 처리 과정

1. 기존의 작업을 처리하던 도중, 인터럽트가 발생
2. 현재 컴퓨터가 처리하는 일을 중지하고 현재의 컴퓨터의 상태(CPU 내부의 레지스터, 메인 메모리 내용 등을)를 저장
3. 해당하는 인터럽트를 처리해주기 위한 인터럽트 서비스 루틴을 처리
4. 인터럽트 처리 이후 저장되었던 이전 작업의 상태를 복구하고 이전 작업 수행을 재개



### 인터럽트 우선 순위

> 인터럽트가 동시에 발생하는 경우 두 개 이상의 인터럽트 내의 우선 순위를 정해 순차적으로 처리

1. 전원 공급의 이상
2. CPU의 기계적인 오류
3. 외부 신호에 의한 인터럽트
4. 입출력 전송 요청 및 전송 완료, 전송 오류
5. 프로그램 검사 인터럽트
6. 수퍼바이저 호출(SVC 인터럽트)



### 정렬 방법

- **소프트웨어적 방법**
  - **폴링** 
    - CPU가 모든 제어기에 연결된 TEST I/O 선을 이용해 인터럽트를 요청한 장치를 검사하는 방식
    - INTR(INTerrupt Request)선에 올린 요청 플래그를 차례로 검사, 이에 해당하는 인터럽트 서비스 루틴을 수행
    - 장점 : 하드웨어를 추가할 필요가 없어 회로가 간단
    - 단점 : 검사할 때 CPU 자원이 필요해 반응 시간이 느림
- **하드웨어적 방법**
  - 직렬 연결 방식(데이지 체인)
    - 인터럽트가 발생한 위치를 확인하는 회로를 직렬로 연결하는 하드웨어적 방법
    - 장점 : INTR, INTA 선에 장치들을 우선 순위에 따라 순서대로 연결하는 방식으로 비교적 구성이 간단
    - 단점 : CPU 가까이 연결된 장치에 비해 멀리 있는 장치는 인터럽트 요청이 지연
  - 병렬 연결 방식
    - I/O 제어기 마다 별도의 버스 선을 이용하여 INTR, INTA 선을 이용하여 확인하는 방법
    - 장점 : 인터럽트를 요청한 장치를 쉽게 찾을 수 있음
    - 단점
      - 하드웨어 구성이 매우 복잡
      - CPU가 가지고 있는 인터럽트 포트 수에 의해서 연결할 수 있는 장치의 수가 제한됨