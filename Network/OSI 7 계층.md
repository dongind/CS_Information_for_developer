# OSI 7 계층

> OSI 7계층(OSI 7 Layer)는 네트워크 프로토콜이 통신하는 구조를 7개의 계층으로 분리하여 각 계층 간 상호 작동하는 방식

![파일:OSI 7 계층.jpg](http://wiki.hash.kr/images/7/71/OSI_7_%EA%B3%84%EC%B8%B5.jpg)

## 등장 배경

> 컴퓨터 통신망의 확산으로 인해, 통신망의 분야에 따른 **네트워크의 유형과 상관없이 상호 통신이 가능**한 지침의 필요성 대두

1980년대 컴퓨터 통신망이 확산되며서 다양한 통신망 혼재 상황에서의 기능 별 분류가 필요해졌다. 

하지만 통신망 별 정보교환을 위한 별도의 절차를 마련하는 것은 비효율적이므로 다른 제조업자의 시스템이라도 네트워크 유형에 관계없이 상호 통신이 가능한 지침이 필요성이 대두되었다.

ISO(국제 표준화 기구)는 일반적인 통신 환경에서 서로 통신을 원하는 양 당사자는 신뢰성 있고 원활한 통신을 수행하도록 **'OSI 7계층'**이라는 새로운 네트워크 모델을 발표 



## 데이터 캡슐화

> 사용자 데이터가 각 계층을 지나면서 하위 계층은 상위 계층으로부터 온 정보를 데이터로 취급하며, 자신의 계층 특성을 담은 제어정보(주소, 에러 제어 등)를 헤더화 시켜 붙이는 일련의 과정

### 데이터의 이동 경로

 응용 계층 -> OSI 계층 -> 물리 계층

### 캡슐화

 데이터가 이동하는 중, 각 계층은 다른 계층과 통신할 때 데이터에 특정 정보가 들어 있는 머리말(헤더)과 꼬리말(푸터)를 추가한 후 다른 계층으로 전달

### PDU(Protocol )

> 프로토콜 데이터 단위이며 OSI 모델의 정보 처리 단위

캡슐화 과정으로 만들어진 데이터로, 아래 계층으로 내려갈수록 PDU에는 다양한 프로토콜에 의해 헤더와 푸터가 더해져, 물리 계층에서 최종적인 형태를 갖추어, 데이터를 보내는 접점이 된다.

데이터를 받은 컴퓨터 내에서는 PDU로부터 프로토콜의 헤더와 푸터를 분석하여 올라가, 마지막 응용계층에서는 원본 데이터만 남는다.



## 7계층 기능

### 1. 응용 계층(Application Layer, 7계층)

> OSI 7계층 모델에서 최상위 계층으로 사용자가 네트워크 자원에 접근하는 방법을 제공

응용 프로세스와 직접 관계하여 일반적인 **응용 서비스를 수행**하며 아래와 같은 프로토콜이 있다.

- HTTP, FTP, SMTP, POP3, IMAP, Telnet 등등

 	예시) 가상 터미널 텔넷(telnet)



#### 1.1. HTTP 프로토콜(Hyper Text Transfer Protocol)

웹 상에서 웹 서버 및 웹 브라우저 상호 간의 데이터 전송을 위한 응용 계층 프로토콜

처음에는WWW 상의 하이퍼 텍스트 형태의 문서를 전달하는데 주로 이용

현재는 이미지, 비디오, 음성 등의 거의 모든 형식의 데이터를 전송 가능

1. **요청 및 응답의 구조**

   - 동작 형태가 클라이언트/서버 모델로 동작

2. **메세지 교환 형태의 프로토콜**

   - 클라이언트와 서버 간에 'HTTP 메세지'를 주고 받으며 통신
     (SMTP 전제 메일 프로토콜과 유사)
   - HTTP의 응답 및 요청 메세지 구성
   - HTTP 메세지 내 헤더 항목들

3. **트랜잭션 중심의 비연결성 프로토콜**

   - 종단 간 연결이 없음(Connectionless)
   - 이전 상태를 유지하지 않음(Stateless)

4. **전송 계층 프로토콜 및 사용 포트 번호**

   - 전송 계층 프로토콜 : TCP
   - 사용 포트 번호 : 80번

5. **http 표준**

   - HTTP 1.0 : RFC 1945(~1997)
     - 유용한 초기 개념들 도입
     - HTTP 헤더, HTTP 메서드, HTTP 응답 코드, 리다이렉트, 비지속 연결 등

   - HTTP 1.1 : RFC 2068 => RFC 2616 => RFC 7230~7235 (1998년~)
     - HTTP 1.0으로부터 기능 향상
     - HTTP 헤더 내 Host 필드를 필수 항목으로 함(1개 IP 주소에 다수의 가상 호스팅 가능)
     - HTTP 헤더 내 Accept 필드에 의한 컨텐츠 협상
     - 잘 정의된 캐시컨트롤
     - 블록 단위 인코딩 전송
     - 지속 연결 회선(킵얼라이브 커넥션)을 통한 재사용 가능
     - 요청 파이프 라인을 이용한 병렬 커넥션 처리(실제 사용 거의 없음 등)



### 2. 표현 계층(Presentation Layer, 6계층)

> 응용 계층으로부터 전송받거나 응용 계층으로 전달해야 할 인코딩과 디코딩이 이루어지는 계층

응용 계층으로부터 전달 받은 데이터를 읽을 수 있는 형식을 변환하는데 응용 계층의 부담을 덜어주는 역할을 담당하게 됨

 ```markdown
 유니코드(UTF-8)로 인코딩 되어 있는 무서를 ASCII로 인코딩 된 문서로 변환할 작업이 표현 계층에서 이루어짐
 해당 데이터가 TEXT인지, 그림인지, GIF인지 JPG인지의 구분을 수행
 ```



### 3. 세선 계층(Session Layer, 5계층)

> 두 컴퓨터 간의 대화나 세션을 관리하며, 포트(Port)연결이라고도 한다 
>
> 세션 설정, 유지, 종료, 전송 중단 시 복구 등의 기능을 수행

#### 세션 계층(Session Layer)은 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공

- 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(full-duplex)의 통신과 함께 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행
- TCP/IP 세션을 만들고 없애는 책임을 수행

=> 통신 사용자들을 동기화 하고 오류 복구 명령들을 일괄적으로 수행 & 통신을 하기 위한 세션을 확립/유지/중단



### 4. 전송 계층(Transport Layer, 4계층)

> 컴퓨터와 컴퓨터 간에 신뢰성 있는 데이터를 서로 주고받을 수 있도록 하는 역할을 수행

- **EndPoint 사용자들이 신뢰성 있는 데이터를 주고받게 해주는 역할**

  - 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 부담을 덜어준다
  - 시퀀스 넘버 기반의 오류 제어 방식을 사용
  - 흐름 제어, 분할/분리 및 오류 제어를 통해 데이터가 오류 없이 점-대-점으로 전달되게 하는데 신뢰할 수 있는 데이터 전송을 보장

- **패킷 생성 및 전송**

  - 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송

- 헤더에 포트 번호가 포함되어 있음

  - 포트 번호 : 다바이스에 있는 여러 프로세스 중 자기가 가야 할 프로세스를 구분하기 위해 필요한 번호

- **프로토콜** : TCP, UDP, ARP, RTP

  - **TCP(Transmission Control Protocol)**

    1. **신뢰성 있음(Reliable)**

       - 패킷 손실, 중복, 순서 바뀜 등이 없도록 보장(ACK 사용)

    2. **연결 지향적(Connection-oriented)**

       - TCP는 데이터를 전송할 때 상대방의 반응을 지속적으로 확인
       - 상대방의 반응 확인을 위해, 연결(Connection)을 통해 가상의 통신로를 이용하여 통로를 확보하고 데이터를 전송

    3. **식별성**

       - 전송된 데이터의 목적지가 어느 애플리케이션인지 구분

       - 각 애플리케이션마다 포트 넘버(port number)를 다르게 구분함으로써 도착지 애플리케이션 정보를 식별 가능

         -> 즉 어떤 컴퓨터로 전송하기 위한 IP 주소가 필요하고 애플리케이션을 식별하기 위해선 port 넘버까지 필요

       - TCP 헤더에는 출발치 포트 번호와 도착지 포트 번호가 포함

         - 0 ~ 1023번 : 주요 프로토콜이 사용
         - 1024번 : 예약되어 있으나 사용되지 않는 포트
         - 1025번 ~ : 랜덤 포트

    4. 데이터 전송 단위 : 세그먼트(TCP헤더 + 데이터)

  - **UDP(User Datagram Protocol)**

    1. **비연결성, 비신뢰성 서비스**
    2. **패킷을 나누고 재조립하는 과정을 수반하지 않음**
       - 수신지에서 데이터의 정상 수신 여부를 확인하지 않고 데이터를 송신하기만 함
         - 에러와 그에 따른 재전송, 데체는 애플리케이션에서 처리해야함
       - 빠른 속도 => Real Time 서비스에서 사용하면 좋다
    3. 데이터 전송 단위 : 블록 형태의 다이어 그램



### 5. 네트워크 계층(Network Layer, 3계층)

> 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅) / 다양한 종류의 프로토콜 종류 및 라우팅 기술이 존재

목적지 네트워크 주소(**IP**)를 정하고, 그에 따른 경로(**Route**)를 선택하고, 경로에 따라 패킷을 전달해 주는 역할을 수행

- 데이터를 목적지까지 가장 안전하고 빠른 경로로 전달하는 기능(라우팅)이 가장 중요 - 프로토콜, 라우팅 기술 등
- 여러 개의 노드(node)를 거칠 때마다 경로를 찾아주는 역할을 하는 계층
- 다양한 길이의 데이터를 네트워크를 통해 전달하고, 그 과정에서 전송 계층(4 Layer)이 요구하는 서비스 품질(QoS)을 제고하기 위한 기능적, 절차적 수단을 제공
- 전송 단위(PDU) : 패킷(Packet)
- 장비 : 라우터, L3 스위치
- 프로토콜(Protocol) : IP, ICMP 등



### 6. 데이터링크 계층(DataLink Layer)

> 물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 수행

- 물리적인 네트워크를 통해 데이터를 전송하는 수단을 제공, 1홉 통신을 담당한다고도 말한다
  - 홉(hop) : 컴퓨터 네트워크에서 노드로부터 다음 노드로 가는 경로
  - 1홉 통신 : 한 라우터에서 그 다음 라우터까지의 경로
- **물리적인 장치를 식별하는 데 사용할 수 있는 주소 지정 체계를 제공**
  - MAC(맥) 주소를 가지고 통신
    - MAC Address : 컴퓨터 간 데이터를 전송하기 위한 컴퓨터의 물리적 주소
  - MAC vs IP
    - IP 주소 간의 통신은 각 라우터에서 일어나는 MAC 주소와 MAC 주소 통신의 연속적인 과정
    - 예) 특정 주소로 편지를 보낼 때, **IP는 시작점과 끝점에 해당하는 주소**라면, **MAC 주소는 편지가 거쳐가는 중간 거점들**

- **신뢰성 있는 전송을 보장하기 위한 계층**
  - 물리 계층(1 Layer)을 통해 송수신되는 데이터의 전송 오류를 감지하는 기능을 제공, 오류 감지 시 데이터 재전송
  - CRC 기반의 오류 제어와 흐름 제어가 필요
- **전송 단위(PDU)** : **프레임(Frame)**
  - 네트워크 계층으로 전달받은 Packet에 주소와 제어 정보를 헤더와 테일에 추가한 데이터 구조
- **장비 : 브리치, 스위치 등**
- **프로토콜** : 이더넷, MAC, PPP, ATM, LAN, Wifi



### 7. 물리 계층(Physical Layer)

> 상위 계층(데이터 링크)에서 전송된 데이터를 물리적인 전송 매체(허브, 라우터, 케이블 등)를 통해 다른 시스템에 전기적 신호를 전송
>
> 즉, 기계어를 전기적 신호로 바꿔서 와이어에 실어 준다.

- 물리적인 전송 매체를 통하여 상위 계층인 데이터 링크 계층으로부터 전달된 비트 스트림을 상대측 물리 계층으로 전달하는 기능 수행
  - 데이터를 전달할 뿐, 데이터의 내용 / 에러 사항 등을 확인하지 않음
- **전송 단위(PDU) : 비트** 
  - 1 : 전기적으로 On / 0 : 전기적으로 Off
  - 전기 신호의 흐름
- **장비 : 통신 케이블, 허브 등**
- **프로토콜** : Modem, Cable, Fibler, RS-232C





## 출처

http://wiki.hash.kr/index.php/OSI_7_%EA%B3%84%EC%B8%B5

https://shlee0882.tistory.com/110

https://backendcode.tistory.com/167



`#해시태그1` `#해시태그2`